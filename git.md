2021.07.25

<br/>

BlackCoffee git 스터디가 오늘 시작됐다.

3명이 한조로 이뤄져 문제를 해결하는 방식으로 진행됐는데 난 git을 한번도 써본적이 없어서 처음부터 멘붕에 빠졌다.

'fork가 뭐지...?' ㅇㅅㅇ;;

'clone..? 그거 어떻게 하는거야..?;;..' ㅇㅅㅇ?!

나 외에 다른 두분은 모두 git을 사용해본 경험이 있어서 왠지 내가 민폐가 되는게 아닐까..란 생각이 들었지만 진짜 너무 감사하게도 사용법을 모르는 것을 가르쳐주는 것 또한 스터디에서 얻을 수 있는 것이라고 말씀하시면서 git의 전반적인 구조나 과제를 수행해 나갈 수 있도록 정말 많은 도움을 주셨다.😂

과제는 충돌이 일어나는 상황을 해결하는 것인데 일단 오늘은 PR (Pull Request)을 하는 것까지 완료했다.

해당 작업이 끝나고 나는 곧바로 git에 대한 기초개념에 대해 공부하기 시작했다.

<br/>
<br/>

## 브랜치? 저장소?

브랜치는 같은 프로젝트로 동시에 서로다른 작업을 진행할 때 서로의 작업에 영향을 주고받지 않도록 자신만의 전용 파일을 만드는 것이라고 생각하면 된다.

즉, Main이라는 프로젝트가 있다면 해당 프로젝트를 branch1, branch2라는 이름으로 복사해와서 작업을 하는 것이다. (branch이름은 해당 브랜치에서 어떤 작업이 이뤄지는지 나타내도록 적는것이 좋다. ex. 로그인 기능 구현)

처음에는 '저장소(repository)'라는 것과 '브랜치(branch)'가 무슨 차이가 있는건지 헷갈렸는데 저장소가 '집'이라고 하면 branch는 '구성원'정도로 생각하면 될 것 같다.

음, 그러니까 A라는 저장소 안에 프로젝트를 만들면 main브랜치가 생기는데 이 main브랜치를 복사해서 다른이름의 브랜치들로 만들 수 있기에 A라는 저장소 안에는 여러 브랜치들이 존재하게 되는 것이다.

![branches.jpg](/img/branches.JPG)

<br/>
<br/>

## 브랜치는 각 저장소마다 만들 수 있다.

무슨 의미냐 하면,

next-step이라는 프로젝트를 최초로 발주한 저장소에서도 브랜치를 만들 수 있지만, next-step 프로젝트를 fork해서 가져온 '내 깃헙에 만들어진 저장소'에서도 브랜치를 만들 수 있다는 것이다.

![branches2.jpg](/img/branches2.JPG)

<br/>
<br/>

## fork? clone? add? commit?

![repository](/img/repository.PNG)
![local](/img/locak.PNG)


만약 프로젝트를 외부에서 가져오는게 아니라면 fork랑 clone은 옵션으로 보면 된다.

만약 내가 메인을 만들고, 그 안에서 branch를 만들어서 각 브랜치를 main에 merge하면 된다.

add는 '나 이제 준비 된것 같아!'라고 commit하기 전에 준비단계? 같은거고

commit은 준비 된 파일을 history에 저장하겠다는 의미다.

음, 그러니까 작업 디렉토리에서 a, b, c라는 작업을 하다가 b가 완료가 됐으면 staging area에 넣어놓고 다른 나머지 작업들을 진행하면 된다.

a까지 완료가 되서 staging area에 넣어놨는데 c는 아직 작업이 덜 끝났다. 하지만 괜찮다. commit을 하게 되면 staging area에 있는 a, b만 git 저장소로 넘어가게 되기 때문이다.


<br/>
<br/>

## 명령어

git switch 브랜치명

선택한 브랜치로 이동 (checkout은 레거시이기에 switch를 쓴다고 들은 것 같다.)

git checkout -b 브랜치명

새 브랜치를 만들면서 해당 브랜치로 이동


<br/>
<br/>

## 충돌 해결하기 -> 아직 해결 못함

이번에 해결해야 할 과제이다.

오늘 git을 처음봐서 지금 내게는 '충돌여부'가 중요한게 아니라 '기본개념'이 중요하기에 스터디 진행 할 때는 신경도 안 썼지만 현재 어느정도 학습을 하고나니 이제 충돌에 대해 해결해보려 한다.

각각 개인브랜치를 만들어서 taiwan이라는 브랜치에 병합하려하니 conflict가 발생한다. 왜냐면 각각 브랜치에서 변경한 내용이 [README.md](http://readme.md) 파일의 같은 행에 존재하고 있기 때문이다.

그림

실제 conflict가 발생한 내용을 보니 다음과 같았다.

![conflict](/img/conflict.JPG)

```jsx
<<<<<<< fenglisu
# 펑리수

1. 풀어진 버터에 설탕, 달걀노른자를 넣고 섞는다.
2. 가루류를 체쳐 넣고 잘 섞은 뒤 뭉쳐 냉장고에 30분간 휴지시킨다.
3. 통조림 파인애플은 작게 다진다.
=======
# 우육면

1. 청경채는 통째 반으로 잘라 준비해주세요.
2. 냄비에 오뚜기 옛날 사골곰탕과 분량의 물을 붓고 센불에 끓여주세요.
3. 국물이 끓어오르면 이금기 굴소스 1/2큰술과 오뚜기 순후추를 기호에 맞게 넣어주세요.
>>>>>>> taiwan
```

<br/>

fenglisu라는 브랜치와 taiwan이라는 브랜치 간의 병합에서 해당 오류가 발생했다는 메세지가 떴다.


<br/>

merge를 해버리면 fast-forward병합이 되서 taiwan 브랜치가 우육면branch쪽으로 옮겨와 병합이 되는데 우육면과 펑리수 브랜치가 같은 버전? 단계?에 놓여있기 때문에 병합을 하면 위와같이 충돌이 발생하게 된다.

지금 git에 대해 공부하고 있는 사이트에 따르면, 충돌이 일어난 파일을 일일이 확인해서 수정해줘야 한다는데 그렇다면 이렇게 수정하면 되는건가?

<br/>

```jsx

# 펑리수

1. 풀어진 버터에 설탕, 달걀노른자를 넣고 섞는다.
2. 가루류를 체쳐 넣고 잘 섞은 뒤 뭉쳐 냉장고에 30분간 휴지시킨다.
3. 통조림 파인애플은 작게 다진다.

# 우육면

1. 청경채는 통째 반으로 잘라 준비해주세요.
2. 냄비에 오뚜기 옛날 사골곰탕과 분량의 물을 붓고 센불에 끓여주세요.
3. 국물이 끓어오르면 이금기 굴소스 1/2큰술과 오뚜기 순후추를 기호에 맞게 넣어주세요.

```

<br/>

ㅇㅅㅇ?

진짜?


일단, 이렇게 직접 충돌부분을 수정하게 되면 해당 변화를 기록하는 병합커밋이 새로 생성이 되고 taiwan브랜치가 한단계 더 나아간 모습을 보여주게 된다. (실제 그런지는 모르겠는데 이론상으론 그렇다.)

<br/>
<br/>

### rebase를 사용해보자

수행과제에 rebase를 이용해보라는 힌트가 있었다.

rebase를  이용하면 이력을 하나의 줄기로 만들 수 있다고 한다. 근데 수정은 직접 손으로 하는 것 같다.

<br/>

- merge와 rebase 비교
![conflict](/img/conflict2.PNG)


<br/>
<br/>

## git을 공부하는데 많은 도움을 받은 사이트

[깃, 깃허브 제대로 배우기 (기본 마스터편, 실무에서 꿀리지 말자)](https://youtu.be/Z9dvM7qgN9s)

git에 대한 기본개념을 다지는데 정말 좋다.

<br/>

[누구나 쉽게 이해할 수 있는 Git 입문~버전 관리를 완벽하게 이용해보자~](https://backlog.com/git-tutorial/kr/stepup/stepup1_1.html)

처음부터 차근히 따라해보자. 정말 설명을 잘 해놨다.

갠적으로는 1번 유툽을 통해 깃이 뭔지에 대해 학습하고 2번으로 넘어와서 차근히 따라해보면 될 것 같다.
